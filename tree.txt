RAG-bidding/
â”‚
â”œâ”€â”€ ğŸ“¦ config/                          # Configuration centralized
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings.py                    # Main settings (merge tá»« enhanced_config.py)
â”‚   â”œâ”€â”€ models.py                      # Model configs (LLM, embedding)
â”‚   â”œâ”€â”€ retrieval.py                   # Retrieval configs
â”‚   â”œâ”€â”€ logging_config.py              # Logging setup
â”‚   â””â”€â”€ legal_patterns.json            # Legal document patterns
â”‚
â”œâ”€â”€ ğŸ“‚ data/                            # Data management
â”‚   â”œâ”€â”€ raw/                           # Raw documents
â”‚   â”‚   â”œâ”€â”€ laws/                      # Luáº­t
â”‚   â”‚   â”œâ”€â”€ decrees/                   # Nghá»‹ Ä‘á»‹nh
â”‚   â”‚   â”œâ”€â”€ circulars/                 # ThÃ´ng tÆ°
â”‚   â”‚   â””â”€â”€ guidelines/                # HÆ°á»›ng dáº«n
â”‚   â”‚
â”‚   â”œâ”€â”€ processed/                     # Processed data
â”‚   â”‚   â”œâ”€â”€ chunks/                    # Chunked documents
â”‚   â”‚   â”œâ”€â”€ metadata/                  # Document metadata
â”‚   â”‚   â””â”€â”€ embeddings/                # Pre-computed embeddings
â”‚   â”‚
â”‚   â””â”€â”€ indexes/                       # Vector store indexes
â”‚       â”œâ”€â”€ pgvector/                  # PostgreSQL vector data
â”‚       â””â”€â”€ backup/                    # Index backups
â”‚
â”œâ”€â”€ ğŸ”§ src/                             # Main source code
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ ingestion/                     # Phase 1: Data Ingestion
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ crawlers/                  # Web crawlers
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ base_crawler.py
â”‚   â”‚   â”‚   â””â”€â”€ thuvienphapluat_crawler.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ extractors/                # Content extraction
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ pdf_extractor.py
â”‚   â”‚   â”‚   â”œâ”€â”€ ocr_processor.py       # OCR vá»›i VinTern
â”‚   â”‚   â”‚   â””â”€â”€ markdown_extractor.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ validators/                # Input validation
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ document_validator.py
â”‚   â”‚       â””â”€â”€ format_validator.py
â”‚   â”‚
â”‚   â”œâ”€â”€ preprocessing/                  # Phase 2: Preprocessing
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ cleaners/                  # Text cleaning
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ text_cleaner.py
â”‚   â”‚   â”‚   â””â”€â”€ legal_normalizer.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ parsers/                   # Structure parsing
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ legal_structure_parser.py
â”‚   â”‚   â”‚   â””â”€â”€ markdown_parser.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ metadata/                  # Metadata extraction
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ extractor.py
â”‚   â”‚       â””â”€â”€ enricher.py
â”‚   â”‚
â”‚   â”œâ”€â”€ chunking/                      # Phase 3: Chunking
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ strategies/                # Chunking strategies
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ legal_chunker.py       # Structure-based
â”‚   â”‚   â”‚   â”œâ”€â”€ semantic_chunker.py    # Semantic-based
â”‚   â”‚   â”‚   â””â”€â”€ hybrid_chunker.py      # Hybrid approach
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ optimal_chunker.py         # Optimal chunk size
â”‚   â”‚   â””â”€â”€ chunk_validator.py         # Quality validation
â”‚   â”‚
â”‚   â”œâ”€â”€ embedding/                     # Phase 4: Embedding
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ generators/                # Embedding generation
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ openai_embedder.py
â”‚   â”‚   â”‚   â””â”€â”€ batch_embedder.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ store/                     # Vector storage
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ pgvector_store.py
â”‚   â”‚       â””â”€â”€ index_builder.py
â”‚   â”‚
â”‚   â”œâ”€â”€ retrieval/                     # Phase 5: Retrieval (Query Enhancement)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ query_processing/          # Query processing
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ query_analyzer.py      # PhÃ¢n tÃ­ch query
â”‚   â”‚   â”‚   â”œâ”€â”€ query_enhancer.py      # Multi-query, HyDE, etc
â”‚   â”‚   â”‚   â”œâ”€â”€ query_rewriter.py      # Query rewriting
â”‚   â”‚   â”‚   â””â”€â”€ complexity_analyzer.py # Äá»™ phá»©c táº¡p cÃ¢u há»i
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ retrievers/                # Retrieval strategies
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ base_retriever.py
â”‚   â”‚   â”‚   â”œâ”€â”€ semantic_retriever.py
â”‚   â”‚   â”‚   â”œâ”€â”€ hybrid_retriever.py    # Vector + keyword
â”‚   â”‚   â”‚   â”œâ”€â”€ adaptive_retriever.py  # Dynamic k
â”‚   â”‚   â”‚   â””â”€â”€ legal_retriever.py     # Legal-specific
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ranking/                   # Reranking
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ reranker.py
â”‚   â”‚   â”‚   â”œâ”€â”€ legal_scorer.py
â”‚   â”‚   â”‚   â””â”€â”€ relevance_filter.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ filters/                   # Post-retrieval filtering
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ date_filter.py
â”‚   â”‚       â”œâ”€â”€ type_filter.py
â”‚   â”‚       â””â”€â”€ deduplicator.py
â”‚   â”‚
â”‚   â”œâ”€â”€ generation/                    # Phase 6: Response Generation
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ chains/                    # LLM chains
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ qa_chain.py
â”‚   â”‚   â”‚   â”œâ”€â”€ enhanced_chain.py
â”‚   â”‚   â”‚   â””â”€â”€ multi_turn_chain.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ prompts/                   # Prompt templates
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ qa_prompts.py
â”‚   â”‚   â”‚   â”œâ”€â”€ legal_prompts.py
â”‚   â”‚   â”‚   â””â”€â”€ templates/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ formatters/                # Response formatting
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ citation_formatter.py
â”‚   â”‚   â”‚   â””â”€â”€ legal_formatter.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ validators/                # Response validation
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ fact_checker.py
â”‚   â”‚       â””â”€â”€ consistency_checker.py
â”‚   â”‚
â”‚   â”œâ”€â”€ evaluation/                    # Phase 7: Evaluation
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ metrics/                   # Evaluation metrics
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ retrieval_metrics.py
â”‚   â”‚   â”‚   â”œâ”€â”€ generation_metrics.py
â”‚   â”‚   â”‚   â””â”€â”€ legal_metrics.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ benchmarks/                # Benchmarking
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ retrieval_benchmark.py
â”‚   â”‚   â”‚   â””â”€â”€ end_to_end_benchmark.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ datasets/                  # Test datasets
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â””â”€â”€ legal_qa_dataset.py
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                        # Data models
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ document.py                # Document models
â”‚   â”‚   â”œâ”€â”€ chunk.py                   # Chunk models
â”‚   â”‚   â”œâ”€â”€ query.py                   # Query models
â”‚   â”‚   â”œâ”€â”€ retrieval.py               # Retrieval models
â”‚   â”‚   â””â”€â”€ response.py                # Response models
â”‚   â”‚
â”‚   â”œâ”€â”€ pipelines/                     # End-to-end pipelines
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ ingestion_pipeline.py      # Full ingestion pipeline
â”‚   â”‚   â”œâ”€â”€ rag_pipeline.py            # Complete RAG pipeline
â”‚   â”‚   â””â”€â”€ evaluation_pipeline.py     # Evaluation pipeline
â”‚   â”‚
â”‚   â””â”€â”€ utils/                         # Utilities
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ file_utils.py              # File operations
â”‚       â”œâ”€â”€ text_utils.py              # Text processing
â”‚       â”œâ”€â”€ legal_utils.py             # Legal-specific utilities
â”‚       â”œâ”€â”€ date_utils.py              # Date parsing
â”‚       â””â”€â”€ logging_utils.py           # Logging helpers
â”‚
â”œâ”€â”€ ğŸŒ api/                             # API layer
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                        # FastAPI app
â”‚   â”œâ”€â”€ dependencies.py                # Dependency injection
â”‚   â”‚
â”‚   â”œâ”€â”€ routers/                       # API routes
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ documents.py               # Document management
â”‚   â”‚   â”œâ”€â”€ search.py                  # Search & retrieval
â”‚   â”‚   â”œâ”€â”€ chat.py                    # Chat endpoints
â”‚   â”‚   â””â”€â”€ admin.py                   # Admin endpoints
â”‚   â”‚
â”‚   â”œâ”€â”€ schemas/                       # Pydantic schemas
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ requests.py                # Request models
â”‚   â”‚   â””â”€â”€ responses.py               # Response models
â”‚   â”‚
â”‚   â””â”€â”€ middleware/                    # Middleware
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ auth.py                    # Authentication
â”‚       â”œâ”€â”€ logging.py                 # Request logging
â”‚       â””â”€â”€ error_handling.py          # Error handling
â”‚
â”œâ”€â”€ ğŸ§ª tests/                           # Test suite
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py                    # Pytest config
â”‚   â”‚
â”‚   â”œâ”€â”€ unit/                          # Unit tests
â”‚   â”‚   â”œâ”€â”€ test_ingestion/
â”‚   â”‚   â”œâ”€â”€ test_preprocessing/
â”‚   â”‚   â”œâ”€â”€ test_chunking/
â”‚   â”‚   â”œâ”€â”€ test_retrieval/
â”‚   â”‚   â””â”€â”€ test_generation/
â”‚   â”‚
â”‚   â”œâ”€â”€ integration/                   # Integration tests
â”‚   â”‚   â”œâ”€â”€ test_pipelines.py
â”‚   â”‚   â””â”€â”€ test_end_to_end.py
â”‚   â”‚
â”‚   â””â”€â”€ fixtures/                      # Test fixtures
â”‚       â”œâ”€â”€ sample_documents/
â”‚       â””â”€â”€ expected_outputs/
â”‚
â”œâ”€â”€ ğŸ““ notebooks/                       # Jupyter notebooks
â”‚   â”œâ”€â”€ 01_data_exploration.ipynb
â”‚   â”œâ”€â”€ 02_chunking_analysis.ipynb
â”‚   â”œâ”€â”€ 03_embedding_evaluation.ipynb
â”‚   â”œâ”€â”€ 04_retrieval_testing.ipynb
â”‚   â””â”€â”€ 05_query_enhancement.ipynb
â”‚
â”œâ”€â”€ ğŸš€ scripts/                         # Utility scripts
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ bootstrap_db.py                # Setup database
â”‚   â”œâ”€â”€ import_chunks.py               # Import processed chunks
â”‚   â”œâ”€â”€ ingest_documents.py            # Bulk ingestion
â”‚   â”œâ”€â”€ update_index.py                # Update vector index
â”‚   â”œâ”€â”€ run_evaluation.py              # Run evaluations
â”‚   â””â”€â”€ benchmark.py                   # Performance benchmark
â”‚
â”œâ”€â”€ ğŸ³ deployment/                      # Deployment files
â”‚   â”œâ”€â”€ docker/
â”‚   â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”‚   â””â”€â”€ docker-compose.prod.yml
â”‚   â”‚
â”‚   â””â”€â”€ k8s/                           # Kubernetes (if needed)
â”‚       â”œâ”€â”€ deployment.yaml
â”‚       â””â”€â”€ service.yaml
â”‚
â”œâ”€â”€ ğŸ“š docs/                            # Documentation
â”‚   â”œâ”€â”€ setup.md                       # Setup guide
â”‚   â”œâ”€â”€ architecture.md                # Architecture overview
â”‚   â”œâ”€â”€ api.md                         # API documentation
â”‚   â”œâ”€â”€ phases/                        # Phase documentation
â”‚   â”‚   â”œâ”€â”€ phase1_quick_wins.md
â”‚   â”‚   â”œâ”€â”€ phase2_advanced.md
â”‚   â”‚   â””â”€â”€ phase3_optimization.md
â”‚   â””â”€â”€ guides/                        # User guides
â”‚       â”œâ”€â”€ ingestion_guide.md
â”‚       â””â”€â”€ retrieval_guide.md
â”‚
â”œâ”€â”€ ğŸ“Š monitoring/                      # Monitoring & logging
â”‚   â”œâ”€â”€ logs/                          # Application logs
â”‚   â”œâ”€â”€ metrics/                       # Metrics data
â”‚   â””â”€â”€ dashboards/                    # Grafana dashboards
â”‚
â”œâ”€â”€ .env.example                       # Environment template
â”œâ”€â”€ .gitignore
â”œâ”€â”€ requirements.txt                   # Python dependencies
â”œâ”€â”€ environment.yaml                   # Conda environment
â”œâ”€â”€ pyproject.toml                     # Project metadata
â””â”€â”€ README.md
