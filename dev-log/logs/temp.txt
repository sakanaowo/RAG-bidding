INFO:     Will watch for changes in these directories: ['/home/sakana/Code/RAG-bidding']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [106170] using WatchFiles
/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/requests/__init__.py:86: RequestsDependencyWarning: Unable to find acceptable character detection dependency (chardet or charset_normalizer).
  warnings.warn(
INFO:     Started server process [106174]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
[2025-10-14 01:22:38] [INFO] src.retrieval.query_processing.strategies.base_strategy: Initialized MultiQueryStrategy with model=gpt-4o-mini, temp=0.7
[2025-10-14 01:22:38] [INFO] src.retrieval.query_processing.strategies.multi_query: MultiQueryStrategy initialized to generate 3 queries
[2025-10-14 01:22:38] [INFO] src.retrieval.query_processing.query_enhancer: Initialized multi_query strategy
[2025-10-14 01:22:38] [INFO] src.retrieval.query_processing.query_enhancer: Initialized QueryEnhancer with strategies: ['EnhancementStrategy']
[2025-10-14 01:22:41] [INFO] httpx: HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-10-14 01:22:41] [INFO] src.retrieval.query_processing.query_enhancer: Enhanced query to 3 variations
[2025-10-14 01:22:41] [INFO] httpx: HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-10-14 01:22:41] [INFO] src.retrieval.query_processing.query_enhancer: Enhanced query to 3 variations
[2025-10-14 01:22:42] [INFO] httpx: HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
[2025-10-14 01:22:42] [INFO] httpx: HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
[2025-10-14 01:22:43] [INFO] httpx: HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
[2025-10-14 01:22:43] [INFO] httpx: HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
[2025-10-14 01:22:43] [INFO] httpx: HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
[2025-10-14 01:22:44] [INFO] httpx: HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
[2025-10-14 01:22:48] [INFO] httpx: HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
INFO:     127.0.0.1:35838 - "POST /ask HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 401, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
  File "/home/sakana/anaconda3/envs/venv/lib/python3.10/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'missing', 'loc': ('response', 'phase1_mode'), 'msg': 'Field required', 'input': {'answer': '- Quy trÃ¬nh Ä‘áº¥u tháº§u rá»™ng rÃ£i quá»‘c táº¿ theo Luáº­t Äáº¥u tháº§u 2023 bao gá»“m cÃ¡c bÆ°á»›c: chuáº©n bá»‹ lá»±a chá»n nhÃ  tháº§u, tá»• chá»©c lá»±a chá»n, Ä‘Ã¡nh giÃ¡ há»“ sÆ¡ dá»± tháº§u, thÆ°Æ¡ng tháº£o há»£p Ä‘á»“ng (náº¿u cáº§n), trÃ¬nh tháº©m Ä‘á»‹nh vÃ  phÃª duyá»‡t káº¿t quáº£, kÃ½ káº¿t vÃ  quáº£n lÃ½ há»£p Ä‘á»“ng [#2].\n- So vá»›i quy Ä‘á»‹nh cÅ©, Luáº­t má»›i yÃªu cáº§u Ã¡p dá»¥ng Ä‘áº¥u tháº§u qua máº¡ng tá»« ngÃ y 01 thÃ¡ng 01 nÄƒm 2025 cho táº¥t cáº£ cÃ¡c gÃ³i tháº§u, Ä‘iá»u nÃ y cÃ³ thá»ƒ táº¡o thuáº­n lá»£i cho doanh nghiá»‡p vá»«a vÃ  nhá» trong viá»‡c tiáº¿p cáº­n thÃ´ng tin vÃ  tham gia Ä‘áº¥u tháº§u [#1].\n- TÃ¡c Ä‘á»™ng Ä‘áº¿n doanh nghiá»‡p vá»«a vÃ  nhá» cÃ³ thá»ƒ tÃ­ch cá»±c, khi há» cÃ³ cÆ¡ há»™i cáº¡nh tranh cÃ´ng báº±ng hÆ¡n vÃ  giáº£m chi phÃ­ tham gia Ä‘áº¥u tháº§u nhá» vÃ o viá»‡c sá»­ dá»¥ng cÃ´ng nghá»‡ vÃ  há»‡ thá»‘ng máº¡ng Ä‘áº¥u tháº§u quá»‘c gia [#1][#2].\n\nNguá»“n:\n[#1] Äiá»u 50 â†’ Khoáº£n 1\n    ğŸ“„ [Pháº§n: CÄ‚N Cá»¨ HIáº¾N PHÃP NÆ¯á»šC Cá»˜NG HÃ’A XÃƒ Há»˜I CHá»¦ NGHÄ¨A VIá»†T NAM;] Äiá»u 50.  Khoáº£n 1: 1. Äáº¥u tháº§u rá»™n...\n    ğŸ”— (https://thuvienphapluat.vn/van-ban/Dau-tu/Luat-Dau-thau-2023-22-2023-QH15-518805.aspx)\n[#2] Äiá»u 43 â†’ Khoáº£n 1\n    ğŸ“„ [Pháº§n: CÄ‚N Cá»¨ HIáº¾N PHÃP NÆ¯á»šC Cá»˜NG HÃ’A XÃƒ Há»˜I CHá»¦ NGHÄ¨A VIá»†T NAM;] Äiá»u 43.  Khoáº£n 1: 1. Quy trÃ¬nh, t...\n    ğŸ”— (https://thuvienphapluat.vn/van-ban/Dau-tu/Luat-Dau-thau-2023-22-2023-QH15-518805.aspx)\n[#3] Äiá»u 3 â†’ Khoáº£n 1\n    ğŸ“„ [Pháº§n: CÄ‚N Cá»¨ HIáº¾N PHÃP NÆ¯á»šC Cá»˜NG HÃ’A XÃƒ Há»˜I CHá»¦ NGHÄ¨A VIá»†T NAM;] Äiá»u 3.  Khoáº£n 1: 1. Hoáº¡t Ä‘á»™ng Ä‘áº¥u...\n    ğŸ”— (https://thuvienphapluat.vn/van-ban/Dau-tu/Luat-Dau-thau-2023-22-2023-QH15-518805.aspx)\n[#4] ChÆ°Æ¡ng CHÆ¯Æ NG XIII â†’ Äiá»u 144 â†’ Khoáº£n 2\n    ğŸ“„ [Pháº§n: Xá»¬ LÃ TÃŒNH HUá»NG TRONG Äáº¤U THáº¦U QUA Máº NG VÃ€ KHÃ”NG QUA Máº NG] [CHÆ¯Æ NG XIII] Äiá»u 144.  Khoáº£n 2:...\n    ğŸ”— (https://thuvienphapluat.vn/van-ban/Dau-tu/Nghi-dinh-214-2025-ND-CP-huong-dan-Luat-Dau-thau-ve-lua-chon-nha-thau-668157.aspx)\n[#5] Äiá»u 43 â†’ Khoáº£n 2\n    ğŸ“„ [Pháº§n: CÄ‚N Cá»¨ HIáº¾N PHÃP NÆ¯á»šC Cá»˜NG HÃ’A XÃƒ Há»˜I CHá»¦ NGHÄ¨A VIá»†T NAM;] Äiá»u 43.  Khoáº£n 2: 2. Quy trÃ¬nh, t...\n    ğŸ”— (https://thuvienphapluat.vn/van-ban/Dau-tu/Luat-Dau-thau-2023-22-2023-QH15-518805.aspx)', 'sources': ['[#1] Äiá»u 50 Khoáº£n 1 - Ná»™i dung tá»« thuvienphapluat.vn', '[#2] Äiá»u 43 Khoáº£n 1 - Ná»™i dung tá»« thuvienphapluat.vn', '[#3] Äiá»u 3 Khoáº£n 1 - Ná»™i dung tá»« thuvienphapluat.vn', '[#4] Äiá»u 144 Khoáº£n 2 - Ná»™i dung tá»« thuvienphapluat.vn', '[#5] Äiá»u 43 Khoáº£n 2 - Ná»™i dung tá»« thuvienphapluat.vn'], 'detailed_sources': ['[#1] Äiá»u 50 â†’ Khoáº£n 1\n    ğŸ“„ [Pháº§n: CÄ‚N Cá»¨ HIáº¾N PHÃP NÆ¯á»šC Cá»˜NG HÃ’A XÃƒ Há»˜I CHá»¦ NGHÄ¨A VIá»†T NAM;] Äiá»u 50.  Khoáº£n 1: 1. Äáº¥u tháº§u rá»™n...\n    ğŸ”— (https://thuvienphapluat.vn/van-ban/Dau-tu/Luat-Dau-thau-2023-22-2023-QH15-518805.aspx)', '[#2] Äiá»u 43 â†’ Khoáº£n 1\n    ğŸ“„ [Pháº§n: CÄ‚N Cá»¨ HIáº¾N PHÃP NÆ¯á»šC Cá»˜NG HÃ’A XÃƒ Há»˜I CHá»¦ NGHÄ¨A VIá»†T NAM;] Äiá»u 43.  Khoáº£n 1: 1. Quy trÃ¬nh, t...\n    ğŸ”— (https://thuvienphapluat.vn/van-ban/Dau-tu/Luat-Dau-thau-2023-22-2023-QH15-518805.aspx)', '[#3] Äiá»u 3 â†’ Khoáº£n 1\n    ğŸ“„ [Pháº§n: CÄ‚N Cá»¨ HIáº¾N PHÃP NÆ¯á»šC Cá»˜NG HÃ’A XÃƒ Há»˜I CHá»¦ NGHÄ¨A VIá»†T NAM;] Äiá»u 3.  Khoáº£n 1: 1. Hoáº¡t Ä‘á»™ng Ä‘áº¥u...\n    ğŸ”— (https://thuvienphapluat.vn/van-ban/Dau-tu/Luat-Dau-thau-2023-22-2023-QH15-518805.aspx)', '[#4] ChÆ°Æ¡ng CHÆ¯Æ NG XIII â†’ Äiá»u 144 â†’ Khoáº£n 2\n    ğŸ“„ [Pháº§n: Xá»¬ LÃ TÃŒNH HUá»NG TRONG Äáº¤U THáº¦U QUA Máº NG VÃ€ KHÃ”NG QUA Máº NG] [CHÆ¯Æ NG XIII] Äiá»u 144.  Khoáº£n 2:...\n    ğŸ”— (https://thuvienphapluat.vn/van-ban/Dau-tu/Nghi-dinh-214-2025-ND-CP-huong-dan-Luat-Dau-thau-ve-lua-chon-nha-thau-668157.aspx)', '[#5] Äiá»u 43 â†’ Khoáº£n 2\n    ğŸ“„ [Pháº§n: CÄ‚N Cá»¨ HIáº¾N PHÃP NÆ¯á»šC Cá»˜NG HÃ’A XÃƒ Há»˜I CHá»¦ NGHÄ¨A VIá»†T NAM;] Äiá»u 43.  Khoáº£n 2: 2. Quy trÃ¬nh, t...\n    ğŸ”— (https://thuvienphapluat.vn/van-ban/Dau-tu/Luat-Dau-thau-2023-22-2023-QH15-518805.aspx)'], 'adaptive_retrieval': {'mode': 'adaptive', 'docs_retrieved': 5, 'enhancement_enabled': True}, 'enhanced_features': ['Modular Retriever Architecture', 'Query Enhancement (Multi-Query, HyDE, Step-Back, Decomposition)', 'RAG-Fusion', 'Adaptive K'], 'processing_time_ms': 10257}}

