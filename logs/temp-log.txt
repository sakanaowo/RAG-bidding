❯ ./scripts/test_sqlalchemy.sh
=== Testing SQLAlchemy Setup ===

1. Activating conda environment...

2. Checking installed packages...
✅ SQLAlchemy 2.0.44
✅ psycopg 3.2.10
Traceback (most recent call last):
  File "<string>", line 18, in <module>
AttributeError: module 'pgvector' has no attribute '__version__'

3. Testing database connection...
❌ Database connection failed: Textual SQL expression 'SELECT 1' should be explicitly declared as text('SELECT 1')

4. Verifying database schema...

=== Database Schema Verification ===
Expected tables: {'documents', 'langchain_pg_embedding', 'langchain_pg_collection'}
Actual tables: {'documents', 'langchain_pg_embedding', 'langchain_pg_collection'}
✅ Schema verification passed

5. Getting database statistics...
{
  "total_documents": 64,
  "total_embeddings": 7892,
  "database_size": "127 MB",
  "document_types": [
    {
      "type": "bidding_form",
      "count": 37
    },
    {
      "type": "report_template",
      "count": 10
    },
    {
      "type": "law",
      "count": 6
    },
    {
      "type": "exam_question",
      "count": 4
    },
    {
      "type": "circular",
      "count": 2
    },
    {
      "type": "decree",
      "count": 2
    },
    {
      "type": "bidding",
      "count": 2
    },
    {
      "type": "decision",
      "count": 1
    }
  ]
}

=== Test Complete ===


    ~/Code/RAG-bidding    develop !3 ?13 ──────────────────── venv   20:35:58  
❯ python scripts/examples/sqlalchemy_usage.py
Traceback (most recent call last):
  File "/home/sakana/Code/RAG-bidding/scripts/examples/sqlalchemy_usage.py", line 12, in <module>
    from src.models.base import SessionLocal, get_db
ModuleNotFoundError: No module named 'src'
