# ============================================================
# RAG BIDDING SYSTEM - ENVIRONMENT CONFIGURATION
# ============================================================
# Copy this file to .env and update with your actual values
# Never commit .env to version control!

# ============================================================
# DATABASE CONFIGURATION
# ============================================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://rag_user:your_password_here@localhost:5432/rag_bidding_v2

# Vector store collection name
LC_COLLECTION=docs

# ============================================================
# OPENAI API CONFIGURATION (REQUIRED)
# ============================================================
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# ============================================================
# EMBEDDING MODEL CONFIGURATION
# ============================================================
# Embedding model for vector search
# Options: text-embedding-3-large (3072 dims), text-embedding-3-small (1536 dims)
EMBED_MODEL=text-embedding-3-large

# LLM model for text generation
# Options: gpt-4o, gpt-4o-mini, gpt-4-turbo
LLM_MODEL=gpt-4o-mini

# ============================================================
# CHUNKING CONFIGURATION
# ============================================================
# Text chunk size (characters)
CHUNK_SIZE=1000

# Overlap between chunks (characters)
CHUNK_OVERLAP=200

# Allowed file extensions (comma-separated)
ALLOWED_EXT=.pdf,.docx,.txt,.md

# ============================================================
# RETRIEVAL CONFIGURATION
# ============================================================
# Number of documents to retrieve
RETRIEVAL_K=5

# Minimum relevance score (0.0-1.0)
MIN_RELEVANCE_SCORE=0.7

# Enable query enhancement
ENABLE_QUERY_ENHANCEMENT=true

# Maximum enhanced queries to generate
MAX_ENHANCED_QUERIES=3

# ============================================================
# RERANKING CONFIGURATION (BGE Reranker)
# ============================================================
# Enable document reranking for better results
ENABLE_RERANKING=true

# Reranker model (BGE multilingual recommended for Vietnamese)
# Options: BAAI/bge-reranker-v2-m3, BAAI/bge-reranker-large
RERANKER_MODEL=BAAI/bge-reranker-v2-m3

# Device for reranker (auto, cuda, cpu)
RERANKER_DEVICE=cpu

# Reranker batch size
RERANKER_BATCH_SIZE=32

# Number of docs to rerank
RERANK_TOP_K=10

# Final number of docs to return after reranking
FINAL_DOCS_K=5

# ============================================================
# RAG MODE CONFIGURATION
# ============================================================
# RAG retrieval mode
# Options: fast (basic retrieval), balanced (with reranking), quality (enhanced)
RAG_MODE=balanced

# Enable adaptive retrieval
ENABLE_ADAPTIVE_RETRIEVAL=true

# Enable enhanced prompts
ENABLE_ENHANCED_PROMPTS=true

# ============================================================
# ANSWER VALIDATION
# ============================================================
# Enable answer validation
ENABLE_ANSWER_VALIDATION=false

# Minimum citations required
MIN_CITATIONS_REQUIRED=1

# Maximum answer length (characters)
MAX_ANSWER_LENGTH=500

# ============================================================
# CONVERSATION MEMORY (Optional)
# ============================================================
# Enable conversation memory
ENABLE_CONVERSATION_MEMORY=false

# Number of previous messages to keep
MEMORY_WINDOW=5

# ============================================================
# PERFORMANCE TUNING
# ============================================================
# Enable parallel processing
PARALLEL_PROCESSING=true

# Enable embedding cache
CACHE_EMBEDDINGS=true

# ============================================================
# QUALITY CONTROL
# ============================================================
# Enable citation checking
CITATION_CHECK=true

# Enable factual consistency check (slower but more accurate)
FACTUAL_CONSISTENCY_CHECK=false

# ============================================================
# LOGGING CONFIGURATION
# ============================================================
# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Enable JSON logging (for production)
LOG_JSON=false

# ============================================================
# REDIS CACHE (Optional - for multi-tier caching)
# ============================================================
# Redis connection URL (leave empty to disable Redis cache)
# REDIS_URL=redis://localhost:6379/0

# Redis cache TTL in seconds (default: 1 hour)
# REDIS_TTL=3600

# ============================================================
# API SERVER CONFIGURATION (Optional)
# ============================================================
# API host
# API_HOST=0.0.0.0

# API port
# API_PORT=8000

# Enable CORS
# ENABLE_CORS=true

# Allowed origins (comma-separated)
# CORS_ORIGINS=http://localhost:3000,http://localhost:8080
